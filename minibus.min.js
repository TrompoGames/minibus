/*! minibus - v2.1.0 - 2014-01-02
 * https://github.com/axelpale/minibus
 *
 * Copyright (c) 2014 Akseli Palen <akseli.palen@gmail.com>;
 * Licensed under the MIT license */


!function(a){"use strict";var b=function(){var a={},b=function(){this.keyRoutes={},this.idRoutes={}};return a.create=function(){return new b},a.extension=b.prototype,b.prototype.on=function(a,b){if(this.keyRoutes.hasOwnProperty(a)){var d,e,f;for(d=this.keyRoutes[a],f=!1,e=0;e<d.length;e+=1)if(b===d[e].fun){f=!0;break}if(f)return d[e]}else this.keyRoutes[a]=[];var g={id:c.create(),key:a,fun:b};return this.keyRoutes[a].push(g),this.idRoutes[g.id]=g,g},b.prototype.off=function(a,b){var c,d,e,f=null,g=!1,h=!1,i=!1;if("string"==typeof a?(c=a,"function"==typeof b?d=b:h=!0):"object"==typeof a?a.hasOwnProperty("id")&&a.hasOwnProperty("key")&&a.hasOwnProperty("fun")&&"string"==typeof a.id&&"string"==typeof a.key&&"function"==typeof a.fun?(f=a.id,c=a.key,d=a.fun):(i=!0,e="Invalid route object."):"undefined"==typeof a?g=!0:(i=!0,e="Unknown route description."),i)throw{name:"InvalidParameterError",message:e};if(g)return this.keyRoutes={},this.idRoutes={},this;if(!this.keyRoutes.hasOwnProperty(c))return this;var j,k,l=this.keyRoutes[c];if(h){for(j=0;j<l.length;j+=1)k=l[j].id,delete this.idRoutes[k];return delete this.keyRoutes[c],this}if(null===f)for(j=0;j<l.length;j+=1)if(d===l[j].fun){f=l[j].id;break}if(null===f)return this;for(j=0;j<l.length;j+=1)if(d===l[j].fun){l.splice(j,1);break}return delete this.idRoutes[f],this},b.prototype.emit=function(a){var b,c,d,e;if(this.keyRoutes.hasOwnProperty(a)){for(b=[],c=1;c<arguments.length;c+=1)b.push(arguments[c]);for(e=b.length>0?b[0]:{},d=this.keyRoutes[a],c=0;c<d.length;c+=1)d[c].fun.apply(e,b)}return this},a}(),c=function(){var a={},b=0;return a.create=function(){return b+=1,b.toString()},a}();b.version="2.1.0","object"==typeof module&&"object"==typeof module.exports?module.exports=b:a.Minibus=b}(this);
//# sourceMappingURL=minibus.min.map